<!doctype html>
<html>
  <head>
    <title>Clownfish App by IMA World Health</title>
    <link href="https://unpkg.com/sanitize.css" rel="stylesheet" />
    <link href="https://unpkg.com/sanitize.css/typography.css" rel="stylesheet" />
    <style>
      body {
        background-color: #fefefe;
      }

      .grid {
        display : grid;
        grid-template-rows: repeat(5, 1fr);
        grid-template-columns: repeat(3, 1fr);
        max-width: 100%;
        height: 100vh;
        padding: 0;
        margin: 0;
      }

      #status {
        grid-row: 1;
        grid-column-start: 1;
        grid-column-end: 4;
        text-align: center;
      }

      #sysinfo {
        grid-row: 2;
        grid-column: 2;
      }

      #sysinfo, #log {
        border: 1px solid black;
        border-radius: 1.2em;
        padding: 0 1em;
      }

      #sysinfo h4, #log h4 {
        padding-top:0.25em;
      }

      #sysinfo ul {
        list-style: none;
        margin-left: 0;
        padding-left: 0;
      }

      #log {
        grid-row: 3 / 6;
        grid-column: 2;

        margin: 1em 0;
        overflow-y: scroll;
      }

      table {
        border-collapse: separate;
        border-spacing: 0;
        *border-collapse: collapse;
        empty-cells: show;
        width: 100%;
      }

      table, th, td {
          border-color: #333; }

      th {
        background: #2d3538;
        color: #fff; }

      td, th {
        padding: 8px; }
    </style>
  </head>

  <body>
    <main class="grid">
      <section id="status">
        <h1>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 243 148" width="50" height="50"><path d="M13.113 75.885c-.675 14.187 2.57 42.779 14.236 50.917s13.66-.613 19.246-5.089c1.88-1.511 3.87-3.08 5.269-5.181 0 0-1.57.284.854-1.509 1.902-4.1 1.536-10.107-4.832-20.425 0 0 2.758-12.137-4.693-17.326-2.21-.442-2.02-1.122-2.02-1.122s-27.385-14.449-28.06-.262z" fill="#DF8106"/><path d="M41.173 76.15s-.19.68 2.02 1.122a11.01 11.01 0 00-2.02-1.122z" fill="#DF8106"/><path d="M57.258 77.181c-8.019.702-12.047.496-14.066.092 7.451 5.189 4.693 17.326 4.693 17.326 6.368 10.317 6.734 16.325 4.832 20.425 1.487-1.099 4.475-2.986 10.267-6.198a221.045 221.045 0 01-.627-6.271c-1.493-17.027-3.498-21.634-5.099-25.369z" fill="#FFF"/><path d="M52.717 115.02c-2.424 1.793-.854 1.509-.854 1.509.317-.47.607-.97.854-1.51zM57.258 77.181c1.601 3.735 3.606 8.343 5.099 25.374.201 2.27.403 4.352.627 6.271 2.93 25.716 7.848 21.279 20.351 24.327 13.432 3.272 23.922-11.395 29.508-15.871l5.586-4.47s-9.223-45.312-14.494-54.093-3.285-10.58-8.496-13.992-41.046-7.326-40.866 15.431c.08 10.894 1.208 13.587 2.68 17.015z" fill="#DF8106"/><path d="M113.1 31.664s.539 15.823-17.66 13.063c5.211 3.412 3.224 5.211 8.496 13.992s14.494 54.093 14.494 54.093 13.932-7.242 20.23-6.943c-1.251-2.046-1.188-4.583-.272-7.38-4.34-2.732-7.071-8.207-6.732-18.033.672-19.561 18.646-16.46 28.218-11.952.072-.168.13-.331.181-.479 1.859-5.917-4.342-8.421-4.342-8.421-25.802-8.811-32.243-12.912-40.034-21.813-1.688-1.924-2.464-3.999-2.535-6.125l-.06-.003z" fill="#FFF"/><path d="M129.88 11.607c-8.121 4.069-17.018 12.376-16.737 20.059.071 2.127.848 4.201 2.535 6.125 7.791 8.9 14.232 13.002 40.034 21.813 0 0 6.201 2.504 4.342 8.421a6.462 6.462 0 01-.181.479c2.063.966 3.742 2.008 4.762 2.896 5.767 5.016 9.007 3.255 9.007 3.255l4.01 15.378c-9.021-2.954-.81 3.749-15.236 8.121-8.466 2.567-17.87 4.215-24.027.335-.915 2.797-.979 5.334.272 7.38l7.889.376c13.789 2.241 33.397-4.731 33.397-4.731l1.635-1.186 22.322-10.94s-11.135 1.681-14.741-2.286c-3.6-3.959-12.598-20.816-11.57-28.989 1.02-8.166 6.074-21.513 14.87-27.099 0 0-29.229-3.285-33.684-9.186-4.46-5.897-18.54-15.419-28.9-10.223z" fill="#DF8106"/><path d="M159.87 68.503c-9.571-4.508-27.546-7.609-28.218 11.952-.338 9.826 2.393 15.301 6.732 18.033 3.47-10.583 19.15-24.816 21.49-29.985z" fill="#DF8106"/><path d="M138.39 98.488c6.157 3.88 15.562 2.232 24.027-.335 14.427-4.372 6.216-11.075 15.236-8.121l-4.01-15.378s-3.24 1.761-9.007-3.255c-1.02-.888-2.699-1.929-4.762-2.896-2.35 5.169-18.03 19.402-21.49 29.985zM146.55 106.24s-1.815 18.1 5.759 24.924c7.581 6.817 26.664 10.745 28.98-4.626 2.31-15.372-2.977-23.838-1.342-25.029 0 .01-19.61 6.98-33.4 4.74zM233.66 60.377c.169-7.927-5.743-17.857-27.219-24.273 0 0-21.181 19.216-5.392 40.348 0 0 5.579 8.954 12.59 7.709 1.533-.271 2.786-.664 3.888-1.2l.007.001c3.938-1.922 5.996-5.691 12.242-12.568 2.04-2.263 3.79-5.86 3.88-10.017zm-.05.019c-.719.325-6.567 2.931-9.65 3.795l9.65-3.795zm-31.15-9.861c.188-3.951 2.945-7.026 6.152-6.874s5.653 3.476 5.465 7.427c-.188 3.944-2.938 7.02-6.145 6.868-3.22-.153-5.67-3.477-5.48-7.421z" fill="#DF8106"/><path d="M202.84 52.088c-.073 1.546 1.069 2.856 2.544 2.926a2.637 2.637 0 001.913-.706c-2.066-.148-3.652-1.795-3.561-3.713.008-.179.031-.357.075-.527a2.874 2.874 0 00-.96 2.02z" fill="#FFF"/><path d="M203.81 50.069a2.589 2.589 0 011.839-.652c1.481.071 2.624 1.38 2.551 2.927a2.87 2.87 0 01-.904 1.965c.036.009.079.011.114.013 2.126.101 3.92-1.406 4.013-3.36.093-1.961-1.549-3.632-3.675-3.733-1.92-.092-3.58 1.142-3.93 2.84z" fill="#1B171B"/><path d="M205.65 49.417a2.589 2.589 0 00-1.839.652c-.044.17-.067.348-.075.527-.092 1.918 1.494 3.565 3.561 3.713a2.87 2.87 0 00.904-1.965c.07-1.547-1.07-2.856-2.55-2.927z" fill="#1B171B"/><path d="M205.38 55.015c-1.475-.07-2.617-1.38-2.544-2.926.039-.816.41-1.537.972-2.02.354-1.698 2.012-2.932 3.938-2.84 2.126.101 3.768 1.772 3.675 3.733-.093 1.954-1.887 3.461-4.013 3.36a.499.499 0 01-.114-.013c-.52.464-1.18.741-1.92.706zm3.23-11.354c-3.207-.152-5.964 2.923-6.152 6.874-.188 3.944 2.266 7.268 5.473 7.42 3.206.152 5.957-2.924 6.145-6.868.18-3.95-2.26-7.274-5.47-7.426z" fill="#FFF"/><path d="M213.64 84.161c-7.011 1.245-12.59-7.709-12.59-7.709-15.789-21.132 5.392-40.348 5.392-40.348l-13.977-5.091c-8.796 5.586-13.851 18.934-14.87 27.099-1.027 8.173 7.971 25.03 11.57 28.989 3.606 3.967 14.741 2.286 14.741 2.286l13.621-6.426c-1.1.536-2.35.929-3.88 1.2zM233.61 60.396l-9.65 3.795c3.09-.864 8.94-3.47 9.65-3.795z" fill="#FFF"/><g stroke="#000" fill="none"><path d="M138.39 98.488c-.915 2.797-.979 5.334.272 7.38l7.889.376s-1.815 18.1 5.759 24.924c7.581 6.817 26.664 10.745 28.98-4.626 2.31-15.372-2.977-23.838-1.342-25.029l1.635-1.186 22.322-10.94s-11.135 1.681-14.741-2.286c-3.6-3.959-12.598-20.816-11.57-28.989 1.02-8.166 6.074-21.513 14.87-27.099 0 0-29.229-3.285-33.684-9.186-4.461-5.894-18.543-15.417-28.898-10.22-8.121 4.069-17.018 12.376-16.737 20.059.071 2.127.848 4.201 2.535 6.125 7.791 8.9 14.232 13.002 40.034 21.813 0 0 6.201 2.504 4.342 8.421a6.462 6.462 0 01-.181.479"/><path d="M217.53 82.962c3.938-1.922 5.996-5.691 12.242-12.568 2.052-2.263 3.801-5.86 3.884-10.017.169-7.927-5.743-17.857-27.219-24.273 0 0-21.181 19.216-5.392 40.348 0 0 5.579 8.954 12.59 7.709 1.533-.271 2.786-.664 3.888-1.2M95.44 44.727s-41.046-7.326-40.866 15.431c.084 10.902 1.211 13.595 2.684 17.022 1.601 3.735 3.606 8.343 5.099 25.374.201 2.27.403 4.352.627 6.271 2.93 25.716 7.848 21.279 20.351 24.327 13.432 3.272 23.922-11.395 29.508-15.871l5.586-4.47s-9.223-45.312-14.494-54.093-3.29-10.578-8.5-13.99zM41.173 76.15s-27.385-14.453-28.06-.266 2.57 42.779 14.236 50.917 13.66-.613 19.246-5.089c1.88-1.511 3.87-3.08 5.269-5.181.316-.473.606-.976.854-1.509 1.902-4.1 1.536-10.107-4.832-20.425 0 0 2.758-12.137-4.693-17.326a11.182 11.182 0 00-2.02-1.119z"/><path d="M202.46 50.535c-.188 3.944 2.266 7.268 5.473 7.42 3.206.152 5.957-2.924 6.145-6.868.188-3.951-2.258-7.274-5.465-7.427s-5.97 2.924-6.16 6.875zM173.64 74.654s-3.24 1.761-9.007-3.255c-1.02-.888-2.699-1.929-4.762-2.896-9.571-4.508-27.546-7.609-28.218 11.952-.338 9.826 2.393 15.301 6.732 18.033 6.157 3.88 15.562 2.232 24.027-.335 14.427-4.372 6.216-11.075 15.236-8.121"/><path d="M203.81 50.069c-.044.17-.067.348-.075.527-.092 1.918 1.494 3.565 3.561 3.713.036.009.079.011.114.013 2.126.101 3.92-1.406 4.013-3.36.093-1.961-1.549-3.632-3.675-3.733-1.92-.092-3.58 1.142-3.93 2.84zM206.44 36.104l-13.98-5.091M113.1 31.664s.539 15.823-17.66 13.063M217.53 82.962l-.01-.001-13.62 6.426M118.43 112.81s13.932-7.242 20.23-6.943M41.173 76.15s-.19.68 2.02 1.122c2.019.404 6.047.61 14.066-.092.605-.057 1.232-.113 1.888-.175M51.864 116.53s-1.57.284.854-1.509c1.487-1.099 4.475-2.986 10.267-6.198.626-.35 1.275-.714 1.967-1.09"/><path stroke-width="2" d="M233.61 60.396c-.719.325-6.567 2.931-9.65 3.795M233.61 60.396l.05-.019.03-.013M179.95 101.51s-19.608 6.973-33.397 4.731"/></g></svg>
          <%- title %>
        </h1>
        <h5><%- subtitle %></h5>
      </section>

      <section id="sysinfo">
        <h4>System Information</h4>
        <ul>
          <li><b>OS:</b> <%- info.os %></li>
          <li><b>Hostname:</b> <%- info.hostname %></li>
          <li><b>RAM:</b> <%- info.ram.toFixed(2) %> GB</li>
          <li><b>CPUs:</b> <%- info.cpus %></li>
          <li><b>Process Uptime:</b> <%- info.uptime %>s</li>
          <li><b>System Uptime:</b> <%- info.sysuptime %>s</li>
          <li><b>Node Version:</b> <%- info.nodeversion %></li>
        </ul>
      </section>

      <section id="log">
        <h4>Interaction Log</h4>
        <table>
          <thead>
            <tr>
              <th>Timestamp</th>
              <th>Duration</th>
              <th>Sender</th>
              <th>Structure Name</th>
              <th>Report Name</th>
            </tr>
          </thead>

          <tbody>
            <% for (const line of log) { %>
              <tr>
                <td><%= line.end %></td>
                <td><%= line.elapsed %></td>
                <td><%= line.sender %></td>
                <td><%= line.normalizedStructure %></td>
                <td><%= line.normalizedReportName %></td>
              </tr>
            <% } %>
          </tbody>
        </table>
      </section>
    </main>
  </body>
</html>
